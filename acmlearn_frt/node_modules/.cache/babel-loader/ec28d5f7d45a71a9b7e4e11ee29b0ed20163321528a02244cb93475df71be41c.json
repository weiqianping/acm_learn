{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { reactive } from \"vue\";\nimport router from '@/router';\nconst state = reactive({\n  isLoggedIn: !!localStorage.getItem('token'),\n  username: localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user')).username : '',\n  avatar_url: localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user')).avatar_url : ''\n});\nexport function useStore() {\n  const login = user => {\n    state.isLoggedIn = true;\n    state.username = user.username;\n    state.avatar_url = user.avatar_url;\n    this.router.push('/');\n  };\n  const logout = () => {\n    state.isLoggedIn = false;\n    state.username = '';\n    state.avatar_url = '';\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    router.push('/loginregister');\n  };\n  return {\n    state,\n    login,\n    logout\n  };\n}","map":{"version":3,"names":["reactive","router","state","isLoggedIn","localStorage","getItem","username","JSON","parse","avatar_url","useStore","login","user","push","logout","removeItem"],"sources":["E:/acm_learn/acmlearn_frt/src/store.js"],"sourcesContent":["import { reactive } from \"vue\";\r\nimport router from '@/router';\r\n\r\nconst state=reactive({\r\n    isLoggedIn:!!localStorage.getItem('token'),\r\n    username:localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user')).username : '',\r\n    avatar_url:localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user')).avatar_url : '',\r\n});\r\n\r\nexport function useStore(){\r\n    const login=(user)=>{\r\n        state.isLoggedIn=true;\r\n        state.username=user.username;\r\n        state.avatar_url=user.avatar_url;\r\n        \r\n        this.router.push('/');\r\n    };\r\n\r\n    const logout=()=>{\r\n        state.isLoggedIn=false;\r\n        state.username='';\r\n        state.avatar_url='';\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('user');\r\n        router.push('/loginregister');\r\n    };\r\n    \r\n    return{\r\n        state,\r\n        login,\r\n        logout,\r\n    }\r\n}\r\n\r\n"],"mappings":";AAAA,SAASA,QAAQ,QAAQ,KAAK;AAC9B,OAAOC,MAAM,MAAM,UAAU;AAE7B,MAAMC,KAAK,GAACF,QAAQ,CAAC;EACjBG,UAAU,EAAC,CAAC,CAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC1CC,QAAQ,EAACF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,GAAGE,IAAI,CAACC,KAAK,CAACJ,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAACC,QAAQ,GAAG,EAAE;EAC9FG,UAAU,EAACL,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,GAAGE,IAAI,CAACC,KAAK,CAACJ,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAACI,UAAU,GAAG;AACpG,CAAC,CAAC;AAEF,OAAO,SAASC,QAAQA,CAAA,EAAE;EACtB,MAAMC,KAAK,GAAEC,IAAI,IAAG;IAChBV,KAAK,CAACC,UAAU,GAAC,IAAI;IACrBD,KAAK,CAACI,QAAQ,GAACM,IAAI,CAACN,QAAQ;IAC5BJ,KAAK,CAACO,UAAU,GAACG,IAAI,CAACH,UAAU;IAEhC,IAAI,CAACR,MAAM,CAACY,IAAI,CAAC,GAAG,CAAC;EACzB,CAAC;EAED,MAAMC,MAAM,GAACA,CAAA,KAAI;IACbZ,KAAK,CAACC,UAAU,GAAC,KAAK;IACtBD,KAAK,CAACI,QAAQ,GAAC,EAAE;IACjBJ,KAAK,CAACO,UAAU,GAAC,EAAE;IACnBL,YAAY,CAACW,UAAU,CAAC,OAAO,CAAC;IAChCX,YAAY,CAACW,UAAU,CAAC,MAAM,CAAC;IAC/Bd,MAAM,CAACY,IAAI,CAAC,gBAAgB,CAAC;EACjC,CAAC;EAED,OAAM;IACFX,KAAK;IACLS,KAAK;IACLG;EACJ,CAAC;AACL","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}